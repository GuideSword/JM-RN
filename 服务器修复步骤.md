# 服务器修复步骤

## 问题
使用 `python3 main.py` 时提示 `ModuleNotFoundError: No module named 'ncatbot'`

## 原因
使用了系统 Python 而不是虚拟环境的 Python。`ncatbot` 安装在虚拟环境中。

## 解决方案

### 方法1：使用虚拟环境的 Python（推荐）

```bash
cd ~/JM-NcatBot

# 使用虚拟环境的 Python 运行
./venv/bin/python3 main.py
```

### 方法2：激活虚拟环境后运行

```bash
cd ~/JM-NcatBot

# 激活虚拟环境
source venv/bin/activate

# 现在可以直接使用 python3
python3 main.py
```

### 方法3：如果虚拟环境中没有 ncatbot，先安装

```bash
cd ~/JM-NcatBot

# 使用虚拟环境的 pip 安装
./venv/bin/python3 -m pip install ncatbot -U

# 或者激活虚拟环境后安装
source venv/bin/activate
pip install ncatbot -U
```

## 完整修复流程

```bash
cd ~/JM-NcatBot

# 1. 确保虚拟环境中有 ncatbot
./venv/bin/python3 -m pip install ncatbot -U

# 2. 修复导入问题（如果还没修复）
sed -i 's/from ncatbot.utils.config import config/from ncatbot.utils.config import Config/g' main.py

# 3. 检查是否需要添加 config = Config()
# 如果代码中有 config.xxx 的使用，需要在导入后添加：
# config = Config()

# 4. 使用虚拟环境的 Python 运行
./venv/bin/python3 main.py
```

## 验证虚拟环境

```bash
# 检查虚拟环境中的 Python 路径
./venv/bin/python3 --version

# 检查虚拟环境中是否安装了 ncatbot
./venv/bin/python3 -c "import ncatbot; print('ncatbot 已安装')"

# 检查系统 Python（不应该有 ncatbot）
python3 -c "import ncatbot"  # 这会失败，是正常的
```


